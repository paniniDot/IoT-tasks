/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package room.service;

import room.service.serial.CommChannel;
import room.service.serial.SerialCommChannel;

public class App {

	public static void main(String[] args) throws Exception {
		CommChannel channel = new SerialCommChannel("/dev/ttyACM1",9600);	
		// CommChannel channel = new SerialCommChannel("/dev/cu.usbmodem1411",9600);	
		// CommChannel channel = new SerialCommChannel("/dev/cu.isi00-DevB",9600);	
		
		/* attesa necessaria per fare in modo che Arduino completi il reboot */
		System.out.println("Waiting Arduino for rebooting...");		
		Thread.sleep(4000);
		System.out.println("Ready.");		

		
		while (true){
			System.out.println("Sending ping");
			channel.sendMsg("ping");
			String msg = channel.receiveMsg();
			System.out.println("Received: "+msg);		
			Thread.sleep(500);
		}
	}
}
