/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package room.service;

import org.eclipse.paho.client.mqttv3.MqttException;
import room.service.client.Client;

public class App {

	public static void main(String[] args) throws MqttException, InterruptedException {
		try (Client client = new Client("tcp", "broker.mqtt-dashboard.com", 1883)) {
			client.registerToTopic("esp32/light", (t, m) -> System.out.println("Received message: " + new String(m.getPayload())));
			client.registerToTopic("esp32/motion", (t, m) -> System.out.println("Received message: " + new String(m.getPayload())));
			Thread.sleep(10000);
		}
	}

}	
